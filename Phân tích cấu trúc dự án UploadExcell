# PhÃ¢n tÃ­ch cáº¥u trÃºc dá»± Ã¡n UploadExcell

## ğŸ“‹ Tá»•ng quan dá»± Ã¡n
- **TÃªn dá»± Ã¡n**: UploadExcell
- **MÃ´ táº£**: Bá»™ upload excel trÃªn Java
- **Framework**: JHipster 8.9.0
- **CÃ´ng nghá»‡ chÃ­nh**: 
  - Backend: Spring Boot, Spring Data JPA
  - Frontend: Angular
  - Build tool: Maven
  - Database: MySQL (hoáº·c H2 cho development)

## ğŸ“ Cáº¥u trÃºc thÆ° má»¥c JHipster

```
UploadExcell/
â”œâ”€â”€ ğŸ“ src/
â”‚   â”œâ”€â”€ ğŸ“ main/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ java/                    # Code Java backend
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ com/yourpackage/     # Package chÃ­nh cá»§a báº¡n
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ config/          # Cáº¥u hÃ¬nh Spring Boot
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ domain/          # JPA Entities 
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ repository/      # Spring Data repositories
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ service/         # Business logic
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ“ dto/         # Data Transfer Objects
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“ mapper/      # MapStruct mappers
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ web/             
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“ rest/        # REST controllers
â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“ security/        # Spring Security config
â”‚   â”‚   â”œâ”€â”€ ğŸ“ resources/               # Resources
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ config/              # YAML/Properties files
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ application.yml     # Main config
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ application-dev.yml # Dev profile
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ application-prod.yml# Production profile
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ i18n/                # Internationalization
â”‚   â”‚   â”œâ”€â”€ ğŸ“ webapp/                  # Frontend Angular
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ app/                 # Angular application
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ entities/        # Generated entities UI
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ shared/          # Shared components
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ layouts/         # Layout components
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ app.module.ts       # Main Angular module
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ content/             # Static content
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ css/             # Stylesheets
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ images/          # Images
â”‚   â”‚   â”‚   â””â”€â”€ index.html              # Main HTML
â”‚   â”‚   â””â”€â”€ ğŸ“ docker/                  # Docker configurations
â”‚   â”‚       â”œâ”€â”€ app.yml                 # Docker compose for app
â”‚   â”‚       â””â”€â”€ services.yml            # Docker compose for services
â”‚   â””â”€â”€ ğŸ“ test/                        # Test files
â”‚       â”œâ”€â”€ ğŸ“ java/                    # Java unit tests
â”‚       â””â”€â”€ ğŸ“ javascript/              # JavaScript tests
â”œâ”€â”€ ğŸ“ .jhipster/                       # JHipster entity configs
â”œâ”€â”€ .yo-rc.json                         # Yeoman/JHipster config
â”œâ”€â”€ package.json                        # NPM dependencies
â”œâ”€â”€ pom.xml                             # Maven config
â”œâ”€â”€ mvnw                                # Maven wrapper
â”œâ”€â”€ npmw                                # NPM wrapper
â””â”€â”€ README.md                           # Documentation
```

## ğŸ› ï¸ Giáº£i thÃ­ch cÃ¡c thÃ nh pháº§n chÃ­nh

### Backend (Java/Spring Boot)

1. **config/**: Chá»©a cÃ¡c class cáº¥u hÃ¬nh Spring Boot
   - `SecurityConfiguration.java`: Cáº¥u hÃ¬nh báº£o máº­t
   - `DatabaseConfiguration.java`: Cáº¥u hÃ¬nh database
   - `WebConfigurer.java`: Cáº¥u hÃ¬nh web

2. **domain/**: CÃ¡c entity JPA
   - ÄÃ¢y lÃ  nÆ¡i báº¡n Ä‘á»‹nh nghÄ©a cÃ¡c báº£ng database
   - VÃ­ dá»¥: `ExcelFile.java`, `ExcelData.java`

3. **repository/**: Spring Data JPA repositories
   - Interface Ä‘á»ƒ tÆ°Æ¡ng tÃ¡c vá»›i database
   - JHipster tá»± Ä‘á»™ng generate CRUD operations

4. **service/**: Business logic
   - `ExcelUploadService.java`: Xá»­ lÃ½ upload file Excel
   - `ExcelParserService.java`: Parse vÃ  xá»­ lÃ½ dá»¯ liá»‡u Excel

5. **web/rest/**: REST API endpoints
   - `ExcelResource.java`: API endpoints cho upload/download

### Frontend (Angular)

1. **entities/**: Components cho cÃ¡c entity
   - JHipster tá»± Ä‘á»™ng generate CRUD UI

2. **shared/**: Components dÃ¹ng chung
   - Authentication, alerts, pagination...

3. **layouts/**: Layout chÃ­nh cá»§a app
   - Navbar, footer, error pages

## ğŸ“ HÆ°á»›ng dáº«n phÃ¡t triá»ƒn tÃ­nh nÄƒng má»›i

### 1. ThÃªm tÃ­nh nÄƒng Upload Excel

#### BÆ°á»›c 1: Táº¡o Service xá»­ lÃ½ Excel
Táº¡o file `src/main/java/[package]/service/ExcelService.java`:

```java
@Service
@Transactional
public class ExcelService {
    
    public void processExcelFile(MultipartFile file) {
        // Logic xá»­ lÃ½ file Excel
        // Sá»­ dá»¥ng Apache POI Ä‘á»ƒ Ä‘á»c Excel
    }
}
```

#### BÆ°á»›c 2: Táº¡o REST Controller
Táº¡o file `src/main/java/[package]/web/rest/ExcelUploadResource.java`:

```java
@RestController
@RequestMapping("/api")
public class ExcelUploadResource {
    
    @PostMapping("/excel/upload")
    public ResponseEntity<String> uploadExcel(@RequestParam("file") MultipartFile file) {
        // Gá»i service xá»­ lÃ½
    }
}
```

#### BÆ°á»›c 3: Táº¡o Component Angular
Táº¡o component upload trong `src/main/webapp/app/`:

```typescript
// excel-upload.component.ts
export class ExcelUploadComponent {
    uploadFile(event: any) {
        // Logic upload file
    }
}
```

### 2. ThÃªm Entity má»›i

Sá»­ dá»¥ng JHipster generator:
```bash
jhipster entity ExcelData
```

### 3. ThÃªm Validation

Trong `src/main/java/[package]/service/`:
```java
@Service
public class ExcelValidationService {
    public boolean validateExcelStructure(Workbook workbook) {
        // Validate cáº¥u trÃºc file
    }
}
```

### 4. ThÃªm tÃ­nh nÄƒng Export

```java
@GetMapping("/excel/export")
public ResponseEntity<Resource> exportExcel() {
    // Logic export data to Excel
}
```

## ğŸ”§ Cáº¥u hÃ¬nh cáº§n thiáº¿t

### 1. ThÃªm dependencies vÃ o pom.xml:
```xml
<!-- Apache POI cho xá»­ lÃ½ Excel -->
<dependency>
    <groupId>org.apache.poi</groupId>
    <artifactId>poi-ooxml</artifactId>
    <version>5.2.3</version>
</dependency>
```

### 2. Cáº¥u hÃ¬nh upload size trong application.yml:
```yaml
spring:
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB
```

## ğŸ“ Vá»‹ trÃ­ viáº¿t code cho tÃ­nh nÄƒng má»›i

1. **Backend logic**: `src/main/java/[package]/service/`
2. **REST APIs**: `src/main/java/[package]/web/rest/`
3. **Database entities**: `src/main/java/[package]/domain/`
4. **Frontend components**: `src/main/webapp/app/`
5. **Configurations**: `src/main/resources/config/`

## ğŸš€ Commands há»¯u Ã­ch

```bash
# Cháº¡y backend
./mvnw

# Cháº¡y frontend
./npmw start

# Generate entity
jhipster entity [EntityName]

# Build production
./mvnw -Pprod clean verify

# Run tests
./mvnw test
```
